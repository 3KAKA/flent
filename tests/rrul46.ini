[DEFAULT]
; Host to connect to
host=snapon.lab.bufferbloat.net

[global]
; Global options are the options all test instances have in common.


; Binary to run
cmd_binary=netperf

; Command line options passed to the binary
;
; The global cmd_opts are combined for each instance with the cmd_opts of the
; instance, so put options all instances have in common here, and the
; instance-specific ones in the test specification.
cmd_opts=-P 0 -v 0 -D -0.1

; Type of runner used to run (and parse) command
runner=netperf_demo

; Type of aggregator
aggregator=timeseries

; Time step and max interpolation distance
step=0.1
max_distance=0.5

; The name is printed along with the test data
name=Time

; Output formatter. Available output modes: pprint and org_table
output=org_table

plot_title=Ping during 8 bidirectional TCP streams
plot_outlier_scaling=true
legend1_title=TCP upload
legend2_title=TCP download
legend3_title=Ping (ms)
x_label=time (s)

[TCP upload BE]
cmd_opts=-4 -Y CS0,CS0 -H %(host)s -t TCP_STREAM -l 60 -f m
delay=5
units=Mbits/s
plot_label=BE
[TCP upload2 BK]
cmd_opts=-4 -Y CS1,CS1 -H %(host)s -t TCP_STREAM -l 60 -f m
delay=5
units=Mbits/s
plot_label=BK
[TCP6 upload1 BE]
cmd_opts=-6 -Y CS0,CS0 -H %(host)s -t TCP_STREAM -l 60 -f m
delay=5
units=Mbits/s
plot_label=CS5
[TCP6 upload2 BK]
cmd_opts=-6 -Y CS1,CS1 -H %(host)s -t TCP_STREAM -l 60 -f m
delay=5
units=Mbits/s
plot_label=EF
[TCP upload avg]
runner=smooth_average
smooth_steps=10
apply_to=TCP upload BE,TCP upload2 BK,TCP6 upload1 BE,TCP6 upload2 BK
plot_line=k-
plot_label=Avg
plot_linewidth=2


[TCP download BE]
cmd_opts=-4 -Y CS0,CS0 -H %(host)s -t TCP_MAERTS -l 60 -f m
delay=5
plot_linewidth=2.0
units=Mbits/s
subplot=2
plot_label=BE

[TCP download2 BK]
cmd_opts=-4 -Y CS1,CS1 -H %(host)s -t TCP_MAERTS -l 60 -f m
delay=5
units=Mbits/s
subplot=2
plot_label=BK

[TCP6 download1 BE]
cmd_opts=-6 -Y CS0,CS0 -H %(host)s -t TCP_MAERTS -l 60 -f m
delay=5
units=Mbits/s
subplot=2
plot_label=6BE

[TCP6 download2 BK]
cmd_opts=-6 -Y CS1,CS1 -H %(host)s -t TCP_MAERTS -l 60 -f m
delay=5
units=Mbits/s
subplot=2
plot_label=6BK

[TCP download avg]
runner=smooth_average
smooth_steps=10
apply_to=TCP download BE,TCP download2 BK,TCP6 download1 BE,TCP download2 BK 
plot_line=k-
plot_label=Avg
plot_linewidth=2
subplot=2

[Ping (ms) UDP BE]
cmd_opts=-4 -Y CS0,CS0 -H %(host)s -t UDP_RR -l 70
data_transform=rr_to_ms
subplot=3
units=ms
plot_label=UDP EF

[Ping (ms) UDP BK]
cmd_opts=-4 -Y CS1,CS1 -H %(host)s -t UDP_RR -l 70
data_transform=rr_to_ms
subplot=2
subplot=3
units=ms
plot_label=UDP BK

[Ping (ms) UDP6 BE]
cmd_opts=-6 -H %(host)s -t UDP_RR -l 70
data_transform=rr_to_ms
subplot=3
units=ms
plot_label=UDP6 BE

[Ping (ms) UDP6 BK]
cmd_opts=-Y CS1,CS1 -H %(host)s -t UDP_RR -l 70
data_transform=rr_to_ms
subplot=3
units=ms
plot_label=UDP6 BE


[Ping (ms) ICMP]
cmd_binary=/bin/ping6
cmd_opts=-D -i 0.2 -w 69  %(host)s
separate_opts=true
runner=ping
subplot=3
units=ms
plot_label=ICMP

[Ping (ms) avg]
runner=smooth_average
smooth_steps=10
apply_to=Ping (ms) UDP BE,Ping (ms) UDP BK,Ping (ms) UDP6 BE,Ping (ms) UDP6 BK,Ping (ms) ICMP
plot_line=k-
plot_label=Avg
plot_linewidth=2
subplot=3
